<!DOCTYPE html>
<html lang="en">
<head>
    <title id="pageTitle">Converse.js: Mockup</title>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="description" content="Converse.js: Mockup" />
    <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>

    <link type="text/css" rel="stylesheet" media="screen" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css" />
    <link type="text/css" rel="stylesheet" media="screen" href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" />
    <link type="text/css" href="../css/bootverse.css" rel="stylesheet" media="screen" />
    <script src="../components/jquery/dist/jquery.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
</head>

<body>
<!-- HEADER -->
<div id="header_wrap" class="outer">
    <header class="inner">
        <h1 id="project_title"><a href="http://conversejs.org">Converse.js</a></h1>
        <h2 id="project_tagline">Static Mockup</h2>
    </header>
</div>

<div id="conversejs">
    <div class="controlbox chatbox col-sm-3 col-xs-12">
        <div class="box-flyout panel panel-default">
            <ul class="panel-heading nav nav-tabs nav-justified">
                <li class=""><a href="#">Users</a></li>
                <li class="active"><a href="#">Rooms</a></li>
                <li>
                    <div class="btn-group-xs chat-buttons">
                        <button type="button" class="btn btn-danger btn-sm">
                            <span class="glyphicon glyphicon-remove"></span>
                        </button>
                    </div>
                </li>
            </ul>
            <div class="panel-body">
                <div class="btn-group col-sm-12">
                    <button type="button" class="btn btn-default dropdown-toggle col-sm-12" data-toggle="dropdown" title="Click to change your chat status">
                        <span class="icon-online"></span> I am online <span class="icon-pencil"></span>
                    </button>
                    <ul class="dropdown-menu" role="menu">
                        <li><a href="#">Online</a></li>
                        <li><a href="#">Busy</a></li>
                        <li><a href="#">Away</a></li>
                        <li><a href="#">Offline</a></li>
                    </ul>
                </div>
                <div class="btn-group col-sm-12">
                    <button type="button" class="btn btn-default dropdown-toggle col-sm-12" data-toggle="dropdown" title="Click to change your chat status">
                        <span class="icon-plus"></span> Add a contact
                    </button>
                    <ul class="dropdown-menu" role="menu">
                        <li>
                            <form class="add-xmpp-contact">
                                <div class="form-group">
                                    <div class="input-group">
                                        <input type="text" class="form-control" placeholder="Contact username">
                                        <span class="input-group-btn">
                                            <button class="btn btn-default" type="button">Add</button>
                                        </span>
                                    </div><!-- /input-group -->
                                </div>
                            </form>
                        </li>
                    </ul>
                </div>

                <div class="clearfix">
                    <div class="media">
                        <a class="pull-left" href="#">
                            <img class="media-object" data-src="holder.js/32x32" alt="64x64" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCI+PHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjZWVlIj48L3JlY3Q+PHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMzIiIHk9IjMyIiBzdHlsZT0iZmlsbDojYWFhO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1zaXplOjEycHg7Zm9udC1mYW1pbHk6QXJpYWwsSGVsdmV0aWNhLHNhbnMtc2VyaWY7ZG9taW5hbnQtYmFzZWxpbmU6Y2VudHJhbCI+NjR4NjQ8L3RleHQ+PC9zdmc+" style="width: 32px; height: 32px;">
                        </a>
                        <div class="media-body">
                            <h4 class="media-heading">Clark Kent</h4>
                            Nulla vel metus scelerisque ante sollicitudin commodo.
                        </div>
                    </div>
                    <div class="media">
                        <a class="pull-left" href="#">
                            <img class="media-object" data-src="holder.js/64x64" alt="64x64" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCI+PHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjZWVlIj48L3JlY3Q+PHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMzIiIHk9IjMyIiBzdHlsZT0iZmlsbDojYWFhO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1zaXplOjEycHg7Zm9udC1mYW1pbHk6QXJpYWwsSGVsdmV0aWNhLHNhbnMtc2VyaWY7ZG9taW5hbnQtYmFzZWxpbmU6Y2VudHJhbCI+NjR4NjQ8L3RleHQ+PC9zdmc+" style="width: 32px; height: 32px;">
                        </a>
                        <div class="media-body">
                            <h4 class="media-heading">Peter Parker</h4>
                            Cras sit amet nibh libero, in gravida nulla.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="chatbox col-sm-3 col-xs-12">
        <div class="box-flyout panel panel-default">
            <ul class="panel-heading nav nav-justified">
                <li class="">
                    <div class="media">
                        <a class="pull-left" href="#">
                            <img class="media-object" data-src="holder.js/32x32" alt="64x64" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCI+PHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjZWVlIj48L3JlY3Q+PHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMzIiIHk9IjMyIiBzdHlsZT0iZmlsbDojYWFhO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1zaXplOjEycHg7Zm9udC1mYW1pbHk6QXJpYWwsSGVsdmV0aWNhLHNhbnMtc2VyaWY7ZG9taW5hbnQtYmFzZWxpbmU6Y2VudHJhbCI+NjR4NjQ8L3RleHQ+PC9zdmc+" style="width: 48px; height: 48px;">
                        </a>
                        <div class="media-body">
                            <h4 class="media-heading">Clark Kent</h4>
                            Nulla vel metus scelerisque ante sollicitudin commodo.
                        </div>
                    </div>
                </li>
                <li>
                    <div class="btn-group-xs chat-buttons">
                        <button type="button" class="btn btn-default btn-sm">
                            <span class="glyphicon glyphicon-minus"></span>
                        </button>
                        <button type="button" class="btn btn-danger btn-sm">
                            <span class="glyphicon glyphicon-remove"></span>
                        </button>
                    </div>
                </li>
            </ul>
            <div class="panel-body">
                Panel content
            </div>
        </div>
    </div>


</div>

<script>
$(document).ready(function () {
    var refreshWebkit = function () {
        /* This works around a webkit bug. Refresh the browser's viewport,
        * otherwise chatboxes are not moved along when one is closed.
        */
        var conversejs = document.getElementById('conversejs');
        conversejs.style.display = 'none';
        conversejs.offsetHeight = conversejs.offsetHeight; // no need to store this anywhere, the reference is enough
        conversejs.style.display = 'block';
    }

    $('a[href=#chatrooms]').click(function (ev) { 
        switchTab(ev);
    });
    $('a[href=#users]').click(function (ev) {
        switchTab(ev); 
    });

    $("a.choose-xmpp-status").click(function (ev) {
        ev.preventDefault();
        $(ev.target).parent().parent().siblings('dd').find('ul').toggle('fast');
    });

    $("a.change-xmpp-status-message").click(function (ev) {
        ev.preventDefault();
        var form = ''+
                '<form id="set-custom-xmpp-status">' +
                    '<input type="text" class="custom-xmpp-status"I am online"'+
                        'placeholder="I am online"/>' +
                    '<button type="submit">Save</button>' +
                '</form>';

        $(ev.target).closest('.xmpp-status').replaceWith(form);
        $(ev.target).closest('.custom-xmpp-status').focus().focus();
    });

    $('.toggle-xmpp-contact-form').click(function (ev) {
        ev.preventDefault();
        $(ev.target).parent().parent().find('.search-xmpp').toggle('fast', function () {
            if ($(this).is(':visible')) {
                $(this).find('input.username').focus();
            }
        });
    });

    var switchTab = function (ev) {
        ev.preventDefault();
        var $tab = $(ev.target),
            $sibling = $tab.parent().siblings('li').children('a'),
            $tab_panel = $($tab.attr('href')),
            $sibling_panel = $($sibling.attr('href'));

        $sibling_panel.hide();
        $sibling.removeClass('current');
        $tab.addClass('current');
        $tab_panel.show();
    }

    $(function() {
        $('.close-chatbox-button').click(function(ev) {
            var $grandparent = $(ev.target).parent().parent().parent();
            $('#toggle-controlbox').toggle();
            $grandparent.hide(300, function () {
                refreshWebkit();
            });
        });

        $('#toggle-controlbox').click(function(ev) {
            $('#toggle-controlbox').toggle('fast', function () {
                refreshWebkit();
            });
            $('#controlbox').toggle();
        });

        $('.toggle-minimized-chats').click(function(ev) {
            $('.minimized-chats').toggle();
        });

        // Clickable Dropdown
        $('.toggle-otr').click(function(e) {
            $('.toggle-otr ul').slideToggle(200);
            e.stopPropagation();
        });

        $('.toggle-smiley').click(function(e) {
            $(e.target).find('ul').slideToggle(200);
            e.stopPropagation();
        });
        $(document).click(function() {
            if ($('.toggle-otr ul').is(':visible')) {
                $('.toggle-otr ul', this).slideUp(200);
            }
            if ($('.toggle-smiley ul').is(':visible')) {
                $('.toggle-smiley ul', this).slideUp(200);
            }
        });
    });
});
</script>
</html>
